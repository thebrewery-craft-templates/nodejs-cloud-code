image:
  file: .gitpod.Dockerfile

tasks:
  - init: npm install
    command: > 
      psql --command "CREATE USER postgres WITH SUPERUSER PASSWORD 'postgres';" && 
      psql --command "CREATE DATABASE parse;" && 
      cp .env.example .env &&
      npm run dev
  - name: pgadmin4
    command: sh ./.gitpod/setup-web-unattended.sh

ports:
  - port: 1337
    onOpen: open-preview
  - port: 5050
    onOpen: open-browser
  - port: 5432
    onOpen: ignore
